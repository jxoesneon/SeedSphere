/* Tailwind v4 import */
@import "tailwindcss";

/* DaisyUI plugin for Tailwind v4 */
/* stylelint-disable at-rule-no-unknown */
@plugin "daisyui";
/* stylelint-enable at-rule-no-unknown */

/* Centralized spacing tokens */
:root {
  --nav-height: 4rem;        /* sticky navbar height */
  --space-card-x: 1rem;      /* horizontal padding inside cards */
  --space-card-y: 1rem;      /* vertical padding inside cards */
  --space-card-title: 0.5rem;/* gap below card titles */
  --space-section-gap: 2rem; /* vertical gap between major sections */
  --space-grid-gap: 1.5rem;  /* default gap for feature/stat grids */
}
@media (min-width: 768px) {
  :root {
    --space-card-x: 1.25rem;
    --space-card-y: 1.25rem;
    --space-section-gap: 2rem;
    --space-grid-gap: 1.5rem;
  }
}

/* Base spacing for DaisyUI cards */
.card .card-body {
  padding: var(--space-card-y) var(--space-card-x);
}
.card .card-body .card-title {
  margin-bottom: var(--space-card-title);
}

/* Helper utilities to standardize section and grid spacing */
.page-section { margin-top: var(--space-section-gap); }
.app-grid { gap: var(--space-grid-gap); }

/* Smooth scrolling and anchor offset for sticky header/tabs */
html {
  scroll-behavior: smooth;
  scroll-padding-top: 7.5rem; /* navbar + tabs total height (approx) */
}

/* Ensure in-card anchors (e.g., <summary id="..." class="collapse-title">) offset below sticky bars */
.collapse-title {
  scroll-margin-top: 7.5rem;
}

/* Offset top toasts so they don't appear behind the sticky navbar */
.toast.toast-top.with-nav-offset { top: calc(var(--nav-height) + 0.5rem) !important; }
/* Offset for navbar + sticky tabs; keep in sync with html.scroll-padding-top and anchor scroll-margin-top (7.5rem) */
.toast.toast-top.with-tabs-offset { top: calc(7.5rem + 0.5rem) !important; }

/* Global backdrop gradient (from backup Configure page) */
.backdrop {
  position: fixed;
  inset: 0;
  background: radial-gradient(1200px 600px at -20% -10%, #5b9cff33, transparent 60%),
              radial-gradient(1000px 800px at 110% 110%, #9b5bff33, transparent 60%),
              linear-gradient(180deg, #0b1220 0%, #0b1220 100%);
  pointer-events: none;
  z-index: 0;
}

/* Global tooltip behavior: delay display until 4s of hover */
/* Works with DaisyUI v5 tooltips using ::before/::after pseudo-elements */
.tooltip[data-tip]::before,
.tooltip[data-tip]::after {
  transition-property: opacity, transform;
  transition-duration: .15s;
  transition-timing-function: ease;
  transition-delay: 4s !important; /* show after 4 seconds */
}

/* On non-hover state, ensure no delay is queued so hiding is immediate */
.tooltip[data-tip]:not(:hover)::before,
.tooltip[data-tip]:not(:hover)::after {
  transition-delay: 0s !important; /* hide immediately */
}

/* Prevent anchor jumps from landing under the sticky navbar/tabs */
#install,
#upstream,
#prefs,
#sources,
#sort,
#opt,
#sweep,
#lists,
#telemetry {
  scroll-margin-top: 7.5rem; /* navbar (~4rem) + tabs height + breathing room */
}

/* Sticky tabs: auto-hide when sticky; reveal on hover/nearby */
.nav-auto-hide {
  transition: transform .2s ease, opacity .2s ease;
  will-change: transform, opacity;
}
.nav-auto-hide.sticky-active {
  transform: translateY(calc(-100% - 6px));
  opacity: 0;
  pointer-events: none;
  padding-top: .5rem; /* add breathing room above tabs only when sticky is active */
}
.nav-auto-hide.sticky-active.revealed {
  transform: translateY(0);
  opacity: 1;
  pointer-events: auto;
  padding-top: .5rem; /* keep the same spacing when revealed */
}

/* Skip link for keyboard/remote users */
.skip-link {
  position: absolute;
  left: -9999px;
  top: auto;
  width: 1px;
  height: 1px;
  overflow: hidden;
}
.skip-link:focus,
.skip-link:focus-visible {
  position: fixed;
  left: 1rem;
  top: 1rem;
  width: auto;
  height: auto;
  padding: .5rem .75rem;
  border-radius: .5rem;
  background: #111827; /* slate-900 */
  color: #fff;
  outline: 2px solid #93c5fd; /* blue-300 */
  z-index: 10000;
}

/* Stronger, consistent focus ring */
:root { --focus-ring-color: #60a5fa; /* blue-400 */ }
:focus-visible {
  outline: 2px solid var(--focus-ring-color);
  outline-offset: 2px;
}
.btn:focus-visible,
a:focus-visible,
select:focus-visible,
input:focus-visible,
.badge:focus-visible,
.navbar a:focus-visible,
.navbar button:focus-visible {
  box-shadow: 0 0 0 3px color-mix(in srgb, var(--focus-ring-color) 50%, transparent);
}

/* TV/remote (coarse input) adjustments */
html[data-input='coarse'] {
  scroll-behavior: auto; /* reduce animation on remotes */
}
html[data-input='coarse'] .btn,
html[data-input='coarse'] .select,
html[data-input='coarse'] .input {
  min-height: 2.75rem; /* larger hit targets */
}
html[data-input='coarse'] .navbar {
  font-size: 1.0625rem; /* slightly larger nav text */
}
/* Hide hover-only tooltips on coarse devices */
html[data-input='coarse'] .tooltip[data-tip]::before,
html[data-input='coarse'] .tooltip[data-tip]::after {
  display: none !important;
}
